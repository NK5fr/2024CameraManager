<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Camera Manager: src/configfileviewerwidget.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="camera.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Camera Manager
   &#160;<span id="projectnumber">2019 version</span>
   </div>
   <div id="projectbrief">This is the 2019 Camera Manager Project to control and view cameras for motion tracking.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('configfileviewerwidget_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">configfileviewerwidget.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="configfileviewerwidget_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="configfileviewerwidget_8h.html">configfileviewerwidget.h</a>&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QTextEdit&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QMenu&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QAction&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QPushButton&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QGridLayout&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QLabel&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;QTextStream&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;QFile&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;QString&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QLineEdit&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QSpinBox&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="configfilereader_8h.html">configfilereader.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;QtWidgets/QFileDialog&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using namespace </span>std;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* Constructor */</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_config_file_viewer_widget.html#ad41add975fd85770436540b069c0709c">   24</a></span>&#160;<a class="code" href="class_config_file_viewer_widget.html#ad41add975fd85770436540b069c0709c">ConfigFileViewerWidget::ConfigFileViewerWidget</a>(QString filePath) : textEditable(true), view(0){</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  setWindowTitle(<span class="stringliteral">&quot;Configuration File&quot;</span>);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  loadAllParameters = <span class="keyword">false</span>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  this-&gt;path = filePath;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (path.contains(<span class="stringliteral">&quot;option&quot;</span>)) isTextViewOnly = <span class="keyword">false</span>; <span class="comment">//use wizard view also</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordflow">else</span> isTextViewOnly = <span class="keyword">true</span>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">//tabs initialization</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  tabs = <span class="keyword">new</span> QTabWidget();</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">/* Creating QTextEdit, which need to be known to save file latter if asked */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  createTextEditor();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">/* And creating the wizard widget, that will allow to change principal values*/</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">if</span> (!isTextViewOnly) createWizard();<span class="comment">//only for option files</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  setWidget(tabs);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  showWizardView();</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">//TTODO: change this to something more relative, like the size of all widgets or else. It&#39;s for compability with smaller screens.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  this-&gt;resize(575, 375);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  fileContain-&gt;setFont(QFont(<span class="stringliteral">&quot;Courier&quot;</span>, 9));</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  fileContain-&gt;setReadOnly(!textEditable);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">//TTODO: Check if this really works correctly.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">//Explanation: By calling changeView, it may change twice the current tab, reverting to the old state. It didn&#39;t do in the test, but for code safety, it would be best to change this</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   connect(tabs, SIGNAL(currentChanged(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(changeView()));</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/* Right click on the main widget of the viewer */</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::onRightClic(){</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">/* Creating a menu with allowed actions */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  QMenu *menu = <span class="keyword">new</span> QMenu();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">//TTODO: QTextEdit specific actions (undo/redo)</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">//General actions</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  fileEdition = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;File edition&quot;</span>), menu);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  fileEdition-&gt;setCheckable(<span class="keyword">true</span>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  fileEdition-&gt;setChecked(textEditable);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  save = <span class="keyword">new</span> QAction(tr(<span class="stringliteral">&quot;Save&quot;</span>), menu);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  save-&gt;setEnabled(textEditable);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span> (!isTextViewOnly){</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    menu-&gt;addAction(<span class="stringliteral">&quot;Change view&quot;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    menu-&gt;addSeparator();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  menu-&gt;addAction(fileEdition);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (!isTextViewOnly){</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (view == 0) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> (loadAllParameters == <span class="keyword">false</span>) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            menu-&gt;addAction(<span class="stringliteral">&quot;Display all parameters&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            menu-&gt;addAction(<span class="stringliteral">&quot;Display important parameters only&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    menu-&gt;addSeparator();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  menu-&gt;addAction(save);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  menu-&gt;popup(cursor().pos());</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  connect(menu, SIGNAL(triggered(QAction*)),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">this</span>, SLOT(menuProjectAction_triggered(QAction*)));</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/* Click on a menu item */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::menuProjectAction_triggered(QAction* action){</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (action-&gt;text() == <span class="stringliteral">&quot;Change view&quot;</span>){</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    changeView();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;text() == <span class="stringliteral">&quot;File edition&quot;</span>){</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* If edition was allowed, remove the authorisation */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (!action-&gt;isChecked()){</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      preventFileEditing();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">/* Displaying a menu to ask confirmation about allowing files edition */</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    action-&gt;setChecked(<span class="keyword">false</span>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    frame = <span class="keyword">new</span> QFrame();</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    QGridLayout *layout = <span class="keyword">new</span> QGridLayout();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    QPushButton *yes = <span class="keyword">new</span> QPushButton(<span class="stringliteral">&quot;Yes&quot;</span>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    QPushButton *no = <span class="keyword">new</span> QPushButton(<span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    layout-&gt;addWidget(<span class="keyword">new</span> QLabel(<span class="stringliteral">&quot;You will allow files editing. Are you sure ?&quot;</span>), 0, 0, 1, 2);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    layout-&gt;addWidget(yes, 1, 1, 1, 1);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    layout-&gt;addWidget(no, 1, 0, 1, 1);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    frame-&gt;setLayout(layout);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    frame-&gt;setWindowTitle(<span class="stringliteral">&quot;Files edition ?&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    frame-&gt;setGeometry(300, 300, frame-&gt;minimumWidth(), frame-&gt;minimumHeight());</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    frame-&gt;show();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    connect(yes, SIGNAL(clicked()),</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keyword">this</span>, SLOT(allowFileEditing()));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    connect(no, SIGNAL(clicked()),</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      frame, SLOT(close()));</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;text() == <span class="stringliteral">&quot;Display all parameters&quot;</span>) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    loadAllParameters = <span class="keyword">true</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    resetWizard();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    changeView();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;text() == <span class="stringliteral">&quot;Display important parameters only&quot;</span>) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    loadAllParameters = <span class="keyword">false</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    resetWizard();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    changeView();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;text() == <span class="stringliteral">&quot;Save&quot;</span>){</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">/* Saving the QTextEdit contain into the file at the fullPath path */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    saveFile();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/*Save the file with the string in the QTextEdit*/</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::saveFile() {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  QFile file(path);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">if</span> (!file.open(QIODevice::WriteOnly | QIODevice::Text)){ <span class="keywordflow">return</span>; }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  QTextStream out(&amp;file);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  out &lt;&lt; fileContain-&gt;toPlainText().toUtf8().constData();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/* Clic on the button asking confirmation about editing.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * Editing is now allowed */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::allowFileEditing(){</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  textEditable = <span class="keyword">true</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  fileContain-&gt;setReadOnly(<span class="keyword">false</span>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  frame-&gt;close();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardComboBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    wizardComboBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">true</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardSpinBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    wizardSpinBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">true</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardPathEditBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    wizardPathEditBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">true</span>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::preventFileEditing() {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  textEditable = <span class="keyword">false</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  fileContain-&gt;setReadOnly(<span class="keyword">true</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardComboBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    wizardComboBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">false</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardSpinBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    wizardSpinBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">false</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wizardPathEditBoxes-&gt;size(); i++) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    wizardPathEditBoxes-&gt;at(i)-&gt;setEnabled(<span class="keyword">false</span>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">/*Switch view between text view and wizard view*/</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::changeView() {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">/* Checking view ID and file type to display the right view of the file */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">//view = 1 -&gt; text view</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (view == 1) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    showWizardView();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    view = 0;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">//view = 0 -&gt; wizard view</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    showTextView();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    view = 1;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/* Show file as a text view */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::showTextView(){</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  tabs-&gt;setCurrentWidget(fileContain);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">/* Show file as a wizard view*/</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::showWizardView() {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">//TTODO add a popup window when you switch from raw text view to the wizard view, asking to confirm to save the file or not.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  tabs-&gt;setCurrentWidget(wizardScrollArea);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/*Reset the wizard. The wizard needs to be created first!*/</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::resetWizard() {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keyword">delete</span> wizard;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keyword">delete</span> wizardWrapper;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keyword">delete</span> wizardScrollArea;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keyword">delete</span> wizardComboBoxes;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keyword">delete</span> wizardComboBoxesRealValues;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keyword">delete</span> wizardComboBoxesParameterPosition;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">delete</span> wizardSpinBoxes;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keyword">delete</span> wizardSpinBoxesParameterPosition;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keyword">delete</span> wizardPathEditBoxes;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">delete</span> wizardPathEditBoxesParameterPosition;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keyword">delete</span> wizardCategories;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keyword">delete</span> wizardCategoriesPosition;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keyword">delete</span> wizardLineEdit;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keyword">delete</span> wizardLineEditParameterPosition;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  createWizard();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::createWizard() {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">//From the smallest widget to the biggest one: wizard; wizardWrapper; WizardScrollArea; WizardScrollAreaWrapper;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  wizard = <span class="keyword">new</span> QFormLayout();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  wizardWrapper = <span class="keyword">new</span> QWidget();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  wizardWrapper-&gt;setContextMenuPolicy(Qt::CustomContextMenu);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  wizardWrapper-&gt;setLayout(wizard);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">//The size constraints are here to give space to the wizardWrapper, otherwise it gets &quot;crushed&quot; by the scrollArea.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  wizard-&gt;setSizeConstraint(QLayout::SetMinAndMaxSize);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  wizardScrollArea = <span class="keyword">new</span> QScrollArea();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  wizardScrollArea-&gt;setWidget(wizardWrapper);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">//Initialization of all lists</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  wizardComboBoxes = <span class="keyword">new</span> QList&lt;QComboBox*&gt;();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  wizardComboBoxesRealValues = <span class="keyword">new</span> QList&lt;QList&lt;QString&gt;*&gt;();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  wizardComboBoxesParameterPosition = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  wizardSpinBoxes = <span class="keyword">new</span> QList&lt;QSpinBox*&gt;();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  wizardSpinBoxesParameterPosition = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  wizardPathEditBoxes = <span class="keyword">new</span> QList&lt;pathEditBox*&gt;();</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  wizardPathEditBoxesParameterPosition = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  wizardCategories = <span class="keyword">new</span> QList&lt;QLabel*&gt;();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  wizardCategoriesPosition = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  wizardLineEdit = <span class="keyword">new</span> QList&lt;QLineEdit*&gt;();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  wizardLineEditParameterPosition = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  QString strParam;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">/*Opening the files: the config file, and the list of parameters &quot;parameterList.txt&quot;*/</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="class_config_file_reader.html">ConfigFileReader</a> *cfgreader = <span class="keyword">new</span> <a class="code" href="class_config_file_reader.html">ConfigFileReader</a>(path);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  QFile parameterList(QDir::currentPath() + <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="constants_8h.html#a861731897d04a709372f5138d235efd3">CALIBRATION_PARAMETERLIST_FILE</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">if</span> (!parameterList.open(QIODevice::ReadOnly | QIODevice::Text)) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">/*Catching parameters and putting them into the lists*/</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  QString line;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  QStringList splitLine;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">//The parameter number in parameterList.txt</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">int</span> parameterNumber;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">//Used when we load all parameters</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">int</span> currentParameterNumber = 1;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">//Used to check if operations are done correctly.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  QTextStream pListReader(&amp;parameterList);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">//if we add all parameters, we will need to have the cfgreader set at the first parameter</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">readString</a>(1);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">//Here is the main algorithm to add automatically all the parameters. We read all the parameters in parameterList and add them one by one, depending on their type.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">//Each type of parameter has it&#39;s own mini-algorithm in a if condition.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">while</span> (!pListReader.atEnd()) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    line = pListReader.readLine();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">//if the line is not a comment or empty, we split the line with the delimiter &quot;|&quot; and determine what type it is</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (!line.contains(<span class="stringliteral">&quot;!&quot;</span>) &amp;&amp; !line.isEmpty()) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      splitLine = line.split(<span class="stringliteral">&quot;|&quot;</span>, QString::SkipEmptyParts);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="comment">//read the first element, which shall correspond to the number of the parameter</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      parameterNumber = splitLine.at(0).toInt(&amp;ok);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">//if we successfully read the parameter, we search the type of parameter</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span> (ok) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">//if we decide to load all parameters, we continue to add parameters until parameterNumber is at the right parameter. Check the end of the algorithm to see the rest of the loading after we read all parameterList.txt</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (loadAllParameters == <span class="keyword">true</span>) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          QStringList *parameterAndName;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          <span class="comment">//We load the parameters until we reach the correct parameter number, so that every parameters are in the correct order.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          <span class="keywordflow">while</span> (currentParameterNumber &lt; parameterNumber) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            parameterAndName = cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a5be7958f2247246009450ab0f1db5f52">readNextParameterAndComment</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (parameterAndName != NULL) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;              <span class="comment">//we remove the &quot;!&quot; from the comment, and here is our name!</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;              QString name = parameterAndName-&gt;at(0);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;              name.remove(0, 1);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;              QLineEdit *lineEdit = wizardAddLineEdit(name, parameterAndName-&gt;at(1));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;              wizardLineEdit-&gt;append(lineEdit);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;              wizardLineEditParameterPosition-&gt;append(currentParameterNumber);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;              currentParameterNumber++;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">//if the parameter is a spinbox//</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (splitLine.at(1).compare(<span class="stringliteral">&quot;int&quot;</span>) == 0) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          currentParameterNumber++;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          QSpinBox *spinBox;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          spinBox = wizardAddSpinBox(splitLine.at(2), cfgreader-&gt;<a class="code" href="class_config_file_reader.html#aab64962cbf4949d24b8a1492855682c7">readInt</a>(parameterNumber), -2500, 2500);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          <span class="keywordflow">if</span> (splitLine.size() &gt;= 4) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordtype">int</span> min = splitLine.at(3).toInt(&amp;ok);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span> (ok) spinBox-&gt;setMinimum(min);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">if</span> (splitLine.size() &gt;= 5) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;              <span class="keywordtype">int</span> max = splitLine.at(4).toInt(&amp;ok);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;              <span class="keywordflow">if</span> (ok) spinBox-&gt;setMaximum(max);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          wizardSpinBoxes-&gt;append(spinBox);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          wizardSpinBoxesParameterPosition-&gt;append(parameterNumber);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="comment">//if the parameter is a combobox with strings//</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (splitLine.at(1).compare(<span class="stringliteral">&quot;cmbBox&quot;</span>) == 0) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          currentParameterNumber++;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          QList&lt;QString&gt; *possibleValues = <span class="keyword">new</span> QList&lt;QString&gt;();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          QList&lt;QString&gt; *realValues = <span class="keyword">new</span> QList&lt;QString&gt;();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 3; i &lt; splitLine.size(); i = i + 2) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            possibleValues-&gt;append(splitLine.at(i));</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            realValues-&gt;append(splitLine.at(i + 1));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          QComboBox *cmbBox = wizardAddComboBox(splitLine.at(2), possibleValues);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          QString pickedValue = cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">readString</a>(parameterNumber);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; realValues-&gt;size(); i++) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">if</span> (pickedValue.compare(realValues-&gt;at(i)) == 0) cmbBox-&gt;setCurrentIndex(i);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          wizardComboBoxesRealValues-&gt;append(realValues);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          wizardComboBoxes-&gt;append(cmbBox);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;          wizardComboBoxesParameterPosition-&gt;append(parameterNumber);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="comment">//if the parameter is a path//</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (splitLine.at(1).compare(<span class="stringliteral">&quot;path&quot;</span>) == 0) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          currentParameterNumber++;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          <a class="code" href="classpath_edit_box.html">pathEditBox</a> *pEditBox;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          <span class="keywordflow">if</span> (splitLine.at(3).compare(<span class="stringliteral">&quot;folder&quot;</span>) == 0) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            pEditBox = wizardAddPathEditBox(splitLine.at(2), cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">readString</a>(parameterNumber), <span class="keyword">true</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;          }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            pEditBox = wizardAddPathEditBox(splitLine.at(2), cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">readString</a>(parameterNumber), <span class="keyword">false</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          wizardPathEditBoxes-&gt;append(pEditBox);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          wizardPathEditBoxesParameterPosition-&gt;append(parameterNumber);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          <span class="comment">//if the &quot;parameter&quot; is a category//</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (splitLine.at(1).compare(<span class="stringliteral">&quot;category&quot;</span>) == 0) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          QLabel *categoryLabel = wizardAddCategory(splitLine.at(2));</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          wizardCategories-&gt;append(categoryLabel);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          <span class="comment">//The position of the category is not important, but I wrote it to keep it similar compared to the other parameters.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          wizardCategoriesPosition-&gt;append(parameterNumber);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">//When we reached the end of file, there may be still parameters to load when &quot;all parameters&quot; is ticked. This loop solves the problem.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (loadAllParameters == <span class="keyword">true</span>) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">readString</a>(parameterNumber - 1);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">//Until parameterAndName isn&#39;t null, meaning that the end of the file has been reached.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (QStringList *parameterAndName = cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a5be7958f2247246009450ab0f1db5f52">readNextParameterAndComment</a>(); parameterAndName != NULL; parameterAndName = cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a5be7958f2247246009450ab0f1db5f52">readNextParameterAndComment</a>())  {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      parameterAndName = cfgreader-&gt;<a class="code" href="class_config_file_reader.html#a5be7958f2247246009450ab0f1db5f52">readNextParameterAndComment</a>();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (parameterAndName != NULL &amp;&amp; !parameterAndName-&gt;at(0).contains(<span class="stringliteral">&quot;Approximate location for the frame markers&quot;</span>)) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">//we remove the &quot;!&quot; from the comment, and here is our name!</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        QString name = parameterAndName-&gt;at(0);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        name.remove(0, 1);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        QLineEdit *lineEdit = wizardAddLineEdit(name, parameterAndName-&gt;at(1));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        wizardLineEdit-&gt;append(lineEdit);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        wizardLineEditParameterPosition-&gt;append(currentParameterNumber);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">/*Finalizing the wizard options, like the save button*/</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  QLabel *emptyLabel = <span class="keyword">new</span> QLabel(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  QPushButton *saveButton = <span class="keyword">new</span> QPushButton(<span class="stringliteral">&quot;save&quot;</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  connect(saveButton, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(saveFile()));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  wizard-&gt;addRow(saveButton, emptyLabel);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  connect(wizardWrapper, SIGNAL(customContextMenuRequested(QPoint)),<span class="keyword">this</span>, SLOT(onRightClic()));</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  tabs-&gt;addTab(wizardScrollArea, <span class="stringliteral">&quot;wizard&quot;</span>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keyword">delete</span> cfgreader;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::createTextEditor() {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  fileContain = <span class="keyword">new</span> QTextEdit();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  fileContain-&gt;setContextMenuPolicy(Qt::CustomContextMenu);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">/* Opening file */</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  QFile myFile(path);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">//QFile myFile(&quot;/home/tomash/kode/fou/_TrackPoint_SEPT_2015/TrackPoint_SEPT_2015/input/options.txt&quot;);</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (!myFile.open(QIODevice::ReadOnly | QIODevice::Text))  { <span class="keywordflow">return</span>; }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  QString line;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">/* Adding lines to the QTextEdit component */</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">while</span> (!myFile.atEnd()){</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    line = myFile.readLine();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    fileContain-&gt;setText(fileContain-&gt;toPlainText() + line);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  myFile.close();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  tabs-&gt;addTab(fileContain, <span class="stringliteral">&quot;raw text&quot;</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  connect(fileContain, SIGNAL(customContextMenuRequested(QPoint)),<span class="keyword">this</span>, SLOT(onRightClic()));</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">//Save the wizard parameters</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordtype">void</span> ConfigFileViewerWidget::WizardSave() {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  QString FileContent = fileContain-&gt;toPlainText();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  QStringList SplitFileContent = FileContent.split(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">int</span> n = 1;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  QString line;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">//TTODO: clean the code to make it more flexible, with a list of all parameters</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">//Read and replace</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; SplitFileContent.size(); i++) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    line = SplitFileContent.at(i);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">//if content[i] is not a comment</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (!line.contains(<span class="stringliteral">&quot;!&quot;</span>)) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">//Check the parameter for each position</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="comment">//TTODO increase the performance by reducing the number of imbricated &quot;for&quot;.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; wizardSpinBoxesParameterPosition-&gt;size(); j++) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (wizardSpinBoxesParameterPosition-&gt;at(j) == n) line = QString::number(wizardSpinBoxes-&gt;at(j)-&gt;value());</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; wizardComboBoxesParameterPosition-&gt;size(); j++) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (wizardComboBoxesParameterPosition-&gt;at(j) == n) line = wizardComboBoxesRealValues-&gt;at(j)-&gt;at(wizardComboBoxes-&gt;at(j)-&gt;currentIndex());</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; wizardPathEditBoxesParameterPosition-&gt;size(); j++) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> (wizardPathEditBoxesParameterPosition-&gt;at(j) == n) line = wizardPathEditBoxes-&gt;at(j)-&gt;getValue();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; wizardLineEdit-&gt;size(); j++) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> (wizardLineEditParameterPosition-&gt;at(j) == n) line = wizardLineEdit-&gt;at(j)-&gt;text();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      SplitFileContent.replace(i, line);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      n++;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  fileContain-&gt;setText(SplitFileContent.join(<span class="stringliteral">&quot;\n&quot;</span>));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">//Append at the end of the wizard a new category with the given name. It is used to determine in what category you are.</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;QLabel * ConfigFileViewerWidget::wizardAddCategory(QString name) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  QLabel *label = <span class="keyword">new</span> QLabel(name);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  label-&gt;setAlignment(Qt::AlignCenter);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  QFont Font = label-&gt;font();</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  Font.setBold(<span class="keyword">true</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  Font.setPointSize(Font.pointSize() + 1);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  label-&gt;setStyleSheet(<span class="stringliteral">&quot;QLabel { color : blue; }&quot;</span>);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  label-&gt;setFont(Font);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  label-&gt;setMargin(5);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  wizard-&gt;addRow(label);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> label;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">//Append at the end of the wizard an Integer spinbox with the given name, starting value, min value and max value. It automatically connect it to wizardSave().</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;QSpinBox * ConfigFileViewerWidget::wizardAddSpinBox(QString name, <span class="keywordtype">int</span> initialValue, <span class="keywordtype">int</span> minvalue, <span class="keywordtype">int</span> maxvalue) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  QSpinBox *spinBox = <span class="keyword">new</span> QSpinBox();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  spinBox-&gt;setValue(initialValue);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  spinBox-&gt;setMinimum(minvalue); spinBox-&gt;setMaximum(maxvalue);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  wizard-&gt;addRow(name, spinBox);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  connect(spinBox, SIGNAL(valueChanged(<span class="keywordtype">int</span>)),</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">this</span>, SLOT(WizardSave()));</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">return</span> spinBox;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">//Append at the end of the wizard a combobox with the given name, the list of choices</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;QComboBox * ConfigFileViewerWidget::wizardAddComboBox(QString name, QList&lt;QString&gt; *possibleValues) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  QComboBox * comboBox = <span class="keyword">new</span> QComboBox();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; possibleValues-&gt;size(); i++) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    comboBox-&gt;addItem(possibleValues-&gt;at(i));</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  connect(comboBox, SIGNAL(currentIndexChanged(<span class="keyword">const</span> QString)),</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">this</span>, SLOT(WizardSave()));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  wizard-&gt;addRow(name, comboBox);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">return</span> comboBox;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">//Append at the end of the wizard a LineEdit, whose purpose is to select a path with a file chooser. </span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<a class="code" href="classpath_edit_box.html">pathEditBox</a> * ConfigFileViewerWidget::wizardAddPathEditBox(QString name, QString value, <span class="keywordtype">bool</span> chooseDirectory) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classpath_edit_box.html">pathEditBox</a> *PathEditBox = <span class="keyword">new</span> <a class="code" href="classpath_edit_box.html">pathEditBox</a>(value, path, chooseDirectory);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  connect(PathEditBox-&gt;<a class="code" href="classpath_edit_box.html#a0f16b945ca7ab67e1def8948ca47ed2b">getLineEdit</a>(), SIGNAL(textChanged(QString)), <span class="keyword">this</span>, SLOT(WizardSave()));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  wizard-&gt;addRow(name, PathEditBox);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">return</span> PathEditBox;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">//Append at the end of the wizard a line edit with a given name and value.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;QLineEdit *ConfigFileViewerWidget::wizardAddLineEdit(QString name, QString value) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  QLineEdit *lineEdit = <span class="keyword">new</span> QLineEdit(value);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  wizard-&gt;addRow(name, lineEdit);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  connect(lineEdit, SIGNAL(textChanged(QString)), <span class="keyword">this</span>, SLOT(WizardSave()));</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">return</span> lineEdit;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">//Constructor of pathEditBox</span></div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="classpath_edit_box.html#a43dc1e0ee9cd5d02097804a4e19c7a7e">  501</a></span>&#160;<a class="code" href="classpath_edit_box.html#a43dc1e0ee9cd5d02097804a4e19c7a7e">pathEditBox::pathEditBox</a>(QString value, QString startPathToSearch, <span class="keywordtype">bool</span> chooseDirectory) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  this-&gt;chooseDirectory = chooseDirectory;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  this-&gt;startPlaceToSearch = startPathToSearch;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  layout = <span class="keyword">new</span> QHBoxLayout();</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  layout-&gt;setContentsMargins(0, 0, 0, 0);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  text = <span class="keyword">new</span> QLineEdit(value);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  FileChooserOpener = <span class="keyword">new</span> QPushButton(<span class="stringliteral">&quot;...&quot;</span>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  FileChooserOpener-&gt;setMaximumWidth(50);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  layout-&gt;addWidget(text, 2);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  layout-&gt;addWidget(FileChooserOpener, 1);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  connect(FileChooserOpener, SIGNAL(clicked()),</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">this</span>, SLOT(selectFile()));</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  this-&gt;setLayout(layout);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  this-&gt;setContentsMargins(0, 0, 0, 0);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">//Return the value contained in the QLineEdit</span></div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="classpath_edit_box.html#aad823e4a342f4a028ab9a5f619966ed9">  518</a></span>&#160;QString <a class="code" href="classpath_edit_box.html#aad823e4a342f4a028ab9a5f619966ed9">pathEditBox::getValue</a>() {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">return</span> text-&gt;text();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">//return the lineEdit contained in the PathEditBox</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="classpath_edit_box.html#a0f16b945ca7ab67e1def8948ca47ed2b">  523</a></span>&#160;QLineEdit * <a class="code" href="classpath_edit_box.html#a0f16b945ca7ab67e1def8948ca47ed2b">pathEditBox::getLineEdit</a>() {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">return</span> text;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">//Select a filepath using the QFileDialog.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="keywordtype">void</span> pathEditBox::selectFile() {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  QString path = NULL;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">if</span> (chooseDirectory) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    path = QFileDialog::getExistingDirectory(<span class="keyword">this</span>, this-&gt;startPlaceToSearch);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    path = QFileDialog::getOpenFileName(<span class="keyword">this</span>, <span class="stringliteral">&quot;Choose a file&quot;</span>, this-&gt;startPlaceToSearch, <span class="stringliteral">&quot;All files (*)&quot;</span>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (path != NULL) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    text-&gt;setText(path);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="ttc" id="class_config_file_reader_html_aab64962cbf4949d24b8a1492855682c7"><div class="ttname"><a href="class_config_file_reader.html#aab64962cbf4949d24b8a1492855682c7">ConfigFileReader::readInt</a></div><div class="ttdeci">int readInt(int n)</div><div class="ttdef"><b>Definition:</b> <a href="configfilereader_8cpp_source.html#l00015">configfilereader.cpp:15</a></div></div>
<div class="ttc" id="classpath_edit_box_html_aad823e4a342f4a028ab9a5f619966ed9"><div class="ttname"><a href="classpath_edit_box.html#aad823e4a342f4a028ab9a5f619966ed9">pathEditBox::getValue</a></div><div class="ttdeci">QString getValue()</div><div class="ttdef"><b>Definition:</b> <a href="configfileviewerwidget_8cpp_source.html#l00518">configfileviewerwidget.cpp:518</a></div></div>
<div class="ttc" id="class_config_file_reader_html_a0cdc9e9df26b9ecbb3d7f57fa8c65fc8"><div class="ttname"><a href="class_config_file_reader.html#a0cdc9e9df26b9ecbb3d7f57fa8c65fc8">ConfigFileReader::readString</a></div><div class="ttdeci">QString readString(int n)</div><div class="ttdef"><b>Definition:</b> <a href="configfilereader_8cpp_source.html#l00048">configfilereader.cpp:48</a></div></div>
<div class="ttc" id="class_config_file_viewer_widget_html_ad41add975fd85770436540b069c0709c"><div class="ttname"><a href="class_config_file_viewer_widget.html#ad41add975fd85770436540b069c0709c">ConfigFileViewerWidget::ConfigFileViewerWidget</a></div><div class="ttdeci">ConfigFileViewerWidget(QString filePath)</div><div class="ttdef"><b>Definition:</b> <a href="configfileviewerwidget_8cpp_source.html#l00024">configfileviewerwidget.cpp:24</a></div></div>
<div class="ttc" id="constants_8h_html_a861731897d04a709372f5138d235efd3"><div class="ttname"><a href="constants_8h.html#a861731897d04a709372f5138d235efd3">CALIBRATION_PARAMETERLIST_FILE</a></div><div class="ttdeci">const QString CALIBRATION_PARAMETERLIST_FILE</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00041">constants.h:41</a></div></div>
<div class="ttc" id="classpath_edit_box_html_a43dc1e0ee9cd5d02097804a4e19c7a7e"><div class="ttname"><a href="classpath_edit_box.html#a43dc1e0ee9cd5d02097804a4e19c7a7e">pathEditBox::pathEditBox</a></div><div class="ttdeci">pathEditBox(QString value, QString startPlaceToSearch, bool chooseDirectory)</div><div class="ttdef"><b>Definition:</b> <a href="configfileviewerwidget_8cpp_source.html#l00501">configfileviewerwidget.cpp:501</a></div></div>
<div class="ttc" id="class_config_file_reader_html_a5be7958f2247246009450ab0f1db5f52"><div class="ttname"><a href="class_config_file_reader.html#a5be7958f2247246009450ab0f1db5f52">ConfigFileReader::readNextParameterAndComment</a></div><div class="ttdeci">QStringList * readNextParameterAndComment()</div><div class="ttdef"><b>Definition:</b> <a href="configfilereader_8cpp_source.html#l00102">configfilereader.cpp:102</a></div></div>
<div class="ttc" id="class_config_file_reader_html"><div class="ttname"><a href="class_config_file_reader.html">ConfigFileReader</a></div><div class="ttdef"><b>Definition:</b> <a href="configfilereader_8h_source.html#l00011">configfilereader.h:11</a></div></div>
<div class="ttc" id="classpath_edit_box_html_a0f16b945ca7ab67e1def8948ca47ed2b"><div class="ttname"><a href="classpath_edit_box.html#a0f16b945ca7ab67e1def8948ca47ed2b">pathEditBox::getLineEdit</a></div><div class="ttdeci">QLineEdit * getLineEdit()</div><div class="ttdef"><b>Definition:</b> <a href="configfileviewerwidget_8cpp_source.html#l00523">configfileviewerwidget.cpp:523</a></div></div>
<div class="ttc" id="configfilereader_8h_html"><div class="ttname"><a href="configfilereader_8h.html">configfilereader.h</a></div></div>
<div class="ttc" id="classpath_edit_box_html"><div class="ttname"><a href="classpath_edit_box.html">pathEditBox</a></div><div class="ttdef"><b>Definition:</b> <a href="configfileviewerwidget_8h_source.html#l00021">configfileviewerwidget.h:21</a></div></div>
<div class="ttc" id="configfileviewerwidget_8h_html"><div class="ttname"><a href="configfileviewerwidget_8h.html">configfileviewerwidget.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="configfileviewerwidget_8cpp.html">configfileviewerwidget.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
